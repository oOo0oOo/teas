<!DOCTYPE html>
<meta charset="utf-8"/>
<html>
  <head>
    <title>Infinitea</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.1.0/handlebars.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.0-rc5/js/foundation.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.0-rc5/css/foundation-float.min.css" type="text/css" />
    <link rel="stylesheet" href="style.css" type="text/css" />
    <link id="favicon" rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABIUlEQVRYhe2XsRWDIBCGf/IyiKVuYG9l5wgu4DQu4Ah2VvRuIKWbmOp8F+UQhcTGv0p8yPfl8AICT25I2dYLfX7fAZ60Wa/tBMq2XoamU7GhWzBlB+I3hIjYfi1l7sd1XiugbOtl0gZZkXqLEHBoOkX328LhwMEzQJPwyX3GS9nCAeBlG7gFTdpg0gZlWy98ic7EBhcFpHARaUxS5bvyS3DAsQRzP6qkyq2gK6WWcqoCPFIVzsABoQt4pCoQjLfbWTjgUYG5H9XRxEdL4or3XzGXoKq4qhNdQJLJijRI4vJDGCuPQLTd7koLAoEVCGm/KAIx8gg8At6ts91+Y50JnIOOjtS+ccmIp+JQqK+I9b0gNtgl8fXl13CbxO6Q8a+QxAdkSqxYTllAtwAAAABJRU5ErkJggg==">
  </head>
  <body>
    <div id="intro">
      <br><br><br><br><br><br><br>
      <center>
        <img src="static/img/logo.png" alt="Infinitea Logo">
        <br><br><br>
        <h3>I feel like having a tea!
        </h3>
        <br>
        <img class="tea-icon-main icon-spacing" src="static/img/tea_icon.png" alt="Tea icon">
        <br>
        <br>
        <button class="btn-big" onclick="switch_to_game_phase_0()"><b>Check out garden</b></button>
      </center>
      <div id="credits">
        Made with  <img class="tea-icon-main icon-spacing" src="static/img/tea_icon.png" alt="Tea icon">  by Simon WÃ¼thrich & Oliver Dressler.
      </div>
    </div>
    <!-- phase0 starts here -->
    <div id="ui-game-phase0" class="row">

      <!-- Intro popup with explanation -->
      <div class="reveal popup" id="intro-popup-phase0" data-reveal>
        <h2>This is Your Garden</h2>
        <br><br>
        <p>A gardener is walking around collecting <b>herbs</b>.</p>
        <p>With these herbs you can brew <b>tea</b>.</p>
        <p>Tea is the most important thing in life.</p>
        <img class="tea-icon-main icon-spacing" src="static/img/tea_icon.png" alt="Tea icon"><img class="tea-icon-main icon-spacing" src="static/img/tea_icon.png" alt="Tea icon"><img class="tea-icon-main icon-spacing" src="static/img/tea_icon.png" alt="Tea icon"><img class="tea-icon-main icon-spacing" src="static/img/tea_icon.png" alt="Tea icon"><img class="tea-icon-main icon-spacing" src="static/img/tea_icon.png" alt="Tea icon">
        <p>Oh look! </p>
        <p>They already brought some herbs into your storage.</p>
        <p>Start brewing!</p>
      </div>

      <!--left column-->
      <div class="large-4 small-6 columns main-column">
        <!-- Teabag-Stats box -->
        <div class="row box">
          <div class="row">
            <div class="small-6 columns">
              <h3>Tea</h3>
              <a class="fullscreen-btn" onclick="toggle_fullscreen()">Fullscreen</a><br>
            </div>
            <div class="small-6 columns tea-container">
              <span id="teabags"></span>
              <img class="tea-icon-main" src="static/img/tea_icon.png" alt="Tea icon">
              <br><br>
            </div>
          </div>
          <div class="row">
            <div class="small-6 columns">
              <a class="music-btn" onclick="toggle_play()">Play Music</a>
            </div>
            <div class="small-6 columns tea-container">
              <b><span class="ui-rates"> <span id="teabags-rate"></span>/s</span></b><br>
            </div>
          </div>
        </div>
        <!-- collecting box -->
        <div class="row box relative">
          <div class="title-tab">
            <img src="static/img/greenhouse_tab.png" alt="Garden tab">
          </div>
          <div class="row more-line-height">
            <div class="small-4 columns">
              <b>Herbs</b>
            </div>
            <div class="small-8 columns">
              <b><span id="herbs"></span></b>
              <span class="ui-rates"> (<span id="herbs-rate"></span>/s)</span>
            </div>
          </div>
          <div id="ui-collectors" class="row more-line-height">
            <div class="small-4 columns">
              Farmers
            </div>
            <div class="small-3 columns">
              <span id="farmers"></span>
            </div>
            <div class="small-5 columns">
              <button id="buy-farmers" class="btn-buy" onclick="action('buy_upgrade', 'farmers')">+</button>
              <span id="price-farmers"></span>
            </div>
          </div>
          <div id="ui-collectors2" class="row more-line-height">
            <div class="small-4 columns">
              Tools
            </div>
            <div class="small-3 columns">
              <span id="coll-efficiency"></span>
            </div>
            <div class="small-5 columns">
              <button id="buy-coll-efficiency" class="btn-buy" onclick="action('buy_upgrade', 'coll_efficiency')">+</button>
              <span id="price-coll-efficiency"></span>
            </div>
          </div>
        </div>
        <!-- processing box -->
        <div id="ui-processing" class="row box relative">
          <div class="title-tab">
            <img src="static/img/processing_tab.png" alt="Brewing tab">
          </div>
          <button id="make-teabag" onclick="action('make_tea')" onmousedown="action('make_tea_start')" onmouseup="action('make_tea_end')">Brew&emsp;<img src="static/img/tea_icon.png" class="tea-icon" alt="Tea icon"></button>
          <br>
          <div id="ui-processors1" class="row more-line-height">
            <div class="small-4 columns">
              Brewers
            </div>
            <div class="small-3 columns">
              <span id="processors"></span>
            </div>
            <div class="small-5 columns">
              <button id="buy-processors" class="btn-buy" onclick="action('buy_upgrade', 'processors')">+</button>
              <span id="price-processors"></span>
            </div>
          </div>
          <div id="ui-processors2" class="row more-line-height">
            <div class="small-4 columns">
              Efficiency
            </div>
            <div class="small-3 columns">
              <span id="proc-efficiency"></span>
            </div>
            <div class="small-5 columns">
              <button id="buy-proc-efficiency" class="btn-buy" onclick="action('buy_upgrade', 'proc_efficiency')">+</button>
              <span id="price-proc-efficiency"></span>
            </div>
          </div>
        </div>
        <!-- fertilizer box-->
        <div id="ui-garden" class="row box relative">
          <div class="title-tab">
            <img src="static/img/garden_tab.png" alt="Garden tab">
          </div>
          <div id="ui-garden1" class="row">
            <div class="small-4 columns more-line-height">
              <b>Garden</b>
            </div>
            <div class="small-3 columns more-line-height">
              Size <span id="garden-size"></span>
            </div>
            <div class="small-5 columns more-line-height">
              <button class="btn-buy" id="buy-garden-size" onclick="action('buy_upgrade', 'garden_size')">+</button>
              <span id="price-garden-size"></span>
            </div>
            <br><br>
            <br><br>
          </div>
          <b>Compost</b>
          <div id="ui-compost" class="row">
            <div id="ui-compost0" class="small-4 columns more-line-height">
              Bucket<br>
              <div id="auto-compost-box0" class="auto-compost">
                <label class="switch">
                  <input type="checkbox" id="auto-compost0" class="debug-red">
                  <span class="compost-slider"></span>
                </label>
              </div>
              <div id="price-compost0" class="compost-price-tag"></div>
              <div id="progress-compost0" class="success progress compost">
                <div id="meter-compost0" class="progress-meter"></div>
              </div>
              <button class="btn-compost btn-buy" id="btn-compost0" onclick="action('start_compost', 0)">+</button>
              <button id="btn-set-compost0" class="btn-set-compost buyable" onclick="action('set_compost', 0)"><img src="static/img/compost0.png" alt="Compost 0"></img></button>
              <span class="compost-active" id="compost-active0">Click Map</span>
            </div>
            <div id="ui-compost1" class="small-4 columns more-line-height">
              Barrel<br>
              <div id="auto-compost-box1" class="auto-compost">
                <label class="switch">
                  <input type="checkbox" id="auto-compost1" class="debug-red">
                  <span class="compost-slider"></span>
                </label>
              </div>
              <div id="price-compost1" class="compost-price-tag"></div>
              <div id="progress-compost1" class="success progress compost">
                <div id="meter-compost1" class="progress-meter"></div>
              </div>
              <button class="btn-compost btn-buy" id="btn-compost1" onclick="action('start_compost', 1)">+</button>
              <button id="btn-set-compost1" class="btn-set-compost buyable" onclick="action('set_compost', 1)"><img src="static/img/compost1.png" alt="Compost 1"></img></button>
              <span class="compost-active" id="compost-active1">Click Map</span>
            </div>
            <div id="ui-compost2" class="small-4 columns more-line-height">
              Silo<br>
              <div id="auto-compost-box2" class="auto-compost">
                <label class="switch">
                  <input type="checkbox" id="auto-compost2" class="debug-red">
                  <span class="compost-slider"></span>
                </label>
              </div>
              <div id="price-compost2" class="compost-price-tag"></div>
              <div id="progress-compost2" class="success progress compost">
                <div id="meter-compost2" class="progress-meter"></div>
              </div>

              <button class="btn-compost btn-buy" id="btn-compost2" onclick="action('start_compost', 2)">+</button>
              <button id="btn-set-compost2" class="btn-set-compost buyable" onclick="action('set_compost', 2)"><img src="static/img/compost2.png" alt="Compost 2"></img></button>
              <span class="compost-active" id="compost-active2">Click Map</span>
            </div>
          </div>
          <br><br>
          <div id="ui-map-fertilizer">
            <div class="row">
              <div class="small-12 columns more-line-height">
                <b>Farmer Jobs</b>
              </div>
            </div>
            <div class="row">
              <div class="small-3 columns more-line-height small-font">
                All Collectors
              </div>
              <div class="small-6 columns more-line-height">
                <div class="slider" data-slider data-initial-start="0" data-end="75">
                  <span class="slider-handle" data-slider-handle role="slider" tabindex="1" title="Some of your farmers can fertilize instead of harvest."></span>
                  <span class="slider-fill" data-slider-fill></span>
                  <input id="map-fertilizer-ratio" type="hidden">
                </div>
              </div>
              <div class="small-3 columns more-line-height small-font">
                All Fertilizers
              </div>
              <br><br>
              <br><br>
            </div>
          </div>
        </div>
        <div class="row box menu-box">
          <b>Options</b><br><br>
          <button class="btn-cheat" onclick="reset_save()">Restart</button>
        </div>
        <!-- cheat box -->
        <div class="row box debug-box">
          <b>Debug</b><br><br>
          <button class="btn-cheat" id="cheat" onclick="cheat()">Cheat</button>
          &nbsp;
          <button class="btn-cheat" id="void-teabags" onclick="void_teabags()">Void</button>
          &nbsp;
          <button class="btn-cheat" onclick="reset_save()">Restart</button>
          &nbsp;
          <button class="btn-cheat" onclick="switch_to_game_phase_1()">To Phase 2</button>
        </div>
      </div>

      <!-- middle column-->
      <div class="large-4 small-6 columns main-column">
        <!-- garden box -->
        <div class="row box">
          <div class="equal-aspect-ratio" id="map-container0">
            <canvas class="map" id="map0"></canvas>
          </div>
        </div>

        <div id="ui-coll-strategy" class="row box">
          <div id="strategies">
            <div class="info-exists">
              <img onclick="action('strategy_home')" id="strategy-home" title="Call your workers home." alt="Call your workers home.">
              <span class="info">Workers move home.</span>
            </div>
            <img onclick="action('strategy_up')" id="strategy-up" title="All workers move north." alt="All workers move north.">
            &emsp;&emsp;&emsp;&emsp;&emsp;
            <br>
            <img onclick="action('strategy_left')" id="strategy-left" title="All workers move west." alt="All workers move west.">
            <img onclick="action('strategy_random')" id="strategy-random" title="All workers move randomly." alt="All workers move randomly.">
            <img onclick="action('strategy_right')" id="strategy-right" title="All workers move east." alt="All workers move east.">
            <br>
            <img onclick="action('strategy_smart')" id="strategy-smart" title="Workers pick the best option." alt="Workers pick the best option.">
            <img onclick="action('strategy_down')" id="strategy-down" title="All workers move south." alt="All workers move south.">
            &emsp;&emsp;&emsp;&emsp;&emsp;
          </div>
        </div>
      </div>
      <!-- right column -->
      <div class="large-4 small-12 columns main-column">
        <!-- project box -->
        <div id="ui-projects" class="row box">
          <br>
          <div id="projects-list"></div>
        </div>
      </div>
    </div>

    <!-- phase1 starts here -->
    <div id="ui-game-phase1" class="row">
      <!-- Intro popup phase 1 (= end popup phase 0) -->
      <div class="reveal popup" id="intro-popup-phase1" data-reveal data-close-on-click="false">
        <h2>You reached the <b>TEA</b>rvana!!</h2>
        <br>
        <img class="tea-icon-main icon-spacing" src="static/img/tea_icon.png" alt="Tea icon"><img class="tea-icon-main icon-spacing" src="static/img/tea_icon.png" alt="Tea icon"><img class="tea-icon-main icon-spacing" src="static/img/tea_icon.png" alt="Tea icon"><img class="tea-icon-main icon-spacing" src="static/img/tea_icon.png" alt="Tea icon"><img class="tea-icon-main icon-spacing" src="static/img/tea_icon.png" alt="Tea icon"><img class="tea-icon-main icon-spacing" src="static/img/tea_icon.png" alt="Tea icon"><img class="tea-icon-main icon-spacing" src="static/img/tea_icon.png" alt="Tea icon">
        <p>Stop micromanaging your workers and start medita<b>tea</b>ing!</p>
        <br>
        <button onclick="stay_in_game_phase_0()">Keep playing</button>
        <button onclick="switch_to_game_phase_1()">Continue the journey</button>
      </div>

      <!-- Season warning: Winter is coming! -->
      <div class="reveal popup" id="season-popup" data-reveal>
        <h2>Winter is coming soon!</h2>
        <br><br>
        <p>Your garden will provide less herbs.</p>
      </div>

      <!-- left column -->
      <div class="small-4 columns main-column">
        <!-- teabags-stats box -->
        <div class="row box">
          <div class="row">
            <div class="small-6 columns">
              <h3>Tea Cult</h3>
            </div>
            <div class="small-6 columns tea-container">
              <span id="teabags1"></span>
              <img class="tea-icon-main" src="static/img/tea_icon.png" alt="Tea icon">
              <br><br>
            </div>
          </div>
          <a class="fullscreen-btn" onclick="toggle_fullscreen()">Fullscreen</a><br>
          <a class="music-btn" onclick="toggle_play()">Play Music</a>
          <br><br>
          <div class="row">
            <div class="small-6 columns">
              It is <span id="season"></span>.
              <!-- Add a progress bar on the same line -->
              <div id="progress-season" class="success progress">
                <div id="meter-season" class="progress-meter"></div>
              </div>
            </div>
            <div class="small-6 columns tea-container">
              <span id="teabags-rate1"></span>/s<br>
            </div>
          </div>
        </div>
        <!-- worker box -->
        <div class="row box">
          <div class="row">
            <div class="small-12 columns" id="free-workers-display">
              Free Workers:&nbsp;<span id="workers"></span><br><br>
            </div>
          </div>
          <div class= "row">
            <div class="small-4 columns">
              Farmers
              <button class="button info-btn" type="button" data-tooltip tabindex="1" title="Farmers will collect herbs for you. In summer they are collecting much more than in winter." data-position="right" data-alignment="center">
                i
              </button>
            </div>
            <div class="small-8 columns">
              <button id="remove-worker-greenhouse" class="btn-buy minus" onclick="action('shift_worker', ['farmers', -1])">-</button>
              <button id="add-worker-greenhouse" class="btn-buy" onclick="action('shift_worker', ['farmers', 1])">+</button>
              &emsp;<span id="farmers1"></span> / <span id="farmers-max"></span>
            </div>
          </div>
          <div class="row">
            <div class="small-4 columns">
              Brewers
              <button class="button info-btn" type="button" data-tooltip tabindex="1" title="Brewers process herbs into tea. They can get more efficient later on." data-position="right" data-alignment="center">
                i
              </button>
            </div>
            <div class="small-8 columns">
              <button id="remove-worker-factory" class="btn-buy minus" onclick="action('shift_worker', ['processors', -1])">-</button>
              <button id="add-worker-factory" class="btn-buy" onclick="action('shift_worker', ['processors', 1])">+</button>
              &emsp;<span id="processors1"></span> / <span id="processors-max"></span>
            </div>
          </div>
          <div id="worker-monks" class="row">
            <div class="small-4 columns">
              Monks
              <button class="button info-btn" type="button" data-tooltip tabindex="1" title="Monks will allow you to perform special ceremonies. More monks will charge faster." data-position="right" data-alignment="center">
                i
              </button>
            </div>
            <div class="small-8 columns">
              <button id="remove-worker-monk" class="btn-buy minus" onclick="action('shift_worker', ['monks', -1])">-</button>
              <button id="add-worker-monk" class="btn-buy" onclick="action('shift_worker', ['monks', 1])">+</button>
              &emsp;<span id="monks"></span> / <span id="monks-max"></span>
            </div>
          </div>
          <div id="worker-leaders" class="row">
            <div class="small-4 columns">
              Leader
              <button class="button info-btn" type="button" data-tooltip tabindex="1" title="The leader can exchange ceremonies and focus on specific ones. Only use a leader when you need her!" data-position="right" data-alignment="center">
                i
              </button>
            </div>
            <div class="small-8 columns">
              <button id="remove-worker-leader" class="btn-buy minus" onclick="action('shift_worker', ['leaders', -1])">-</button>
              <button id="add-worker-leader" class="btn-buy" onclick="action('shift_worker', ['leaders', 1])">+</button>
              &emsp;<span id="leaders"></span> / <span id="leaders-max"></span>
            </div>
          </div>
          <div id="worker-meditators" class="row">
            <div class="small-4 columns">
              Cultists
              <button class="button info-btn" type="button" data-tooltip tabindex="1" title="Cultists can increase your focus with their special meditation technique." data-position="right" data-alignment="center">
                i
              </button>
            </div>
            <div class="small-8 columns">
              <button id="remove-worker-meditator" class="btn-buy minus" onclick="action('shift_worker', ['meditators', -1])">-</button>
              <button id="add-worker-meditator" class="btn-buy" onclick="action('shift_worker', ['meditators', 1])">+</button>
              &emsp;<span id="meditators"></span> / <span id="meditators-max"></span>
            </div>
          </div>
        </div>
        <!-- collecting box -->
        <div class="row box relative">
          <!-- little title tab -->
          <div class="title-tab">
            <img src="static/img/greenhouse_tab.png" alt="Garden tab">
          </div>
          <div class="row">
            <div class="small-12 columns">

              <div class="row">
                <div class="small-5 columns">
                  <b>Herbs</b>
                </div>
                <div class="small-7 columns">
                  <b><span id="herbs1"></span></b>&nbsp;(<span id="herbs-rate1"></span>/s)
                </div>
              </div>

              <div id="ui-greenhouse-bonus" class="row more-line-height flex-v-center">
                <div class="small-5 columns">
                  Cult Bonus
                </div>
                <div class="small-2 columns">
                  <span id="farm-bonus"></span>
                </div>
                <div class="small-5 columns">
                  <div id="progress-fertilizer" class="success progress">
                    <div id="meter-fertilizer" class="progress-meter"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="ui-greenhouse-use" class="row more-line-height">
            <div class="small-4 columns">
              Bonus Decay
            </div>
            <div class="small-2 columns">
              <span id="greenhouse-use"></span>
            </div>
            <div class="small-6 columns">
              <button id="buy-greenhouse-use" class="btn-buy" onclick="action('buy_upgrade', 'greenhouse_use')">+</button>
              <span id="price-greenhouse-use"></span>
            </div>
          </div>
          <br>

          <div id="ui-greenhouse-speed" class="row more-line-height">
            <div class="small-4 columns">
              Speed
            </div>
            <div class="small-2 columns">
              <span id="greenhouse-speed"></span>
            </div>
            <div class="small-6 columns">
              <button id="buy-greenhouse-speed" class="btn-buy" onclick="action('buy_upgrade', 'greenhouse_speed')">+</button>
              <span id="price-greenhouse-speed"></span>
            </div>
          </div>

          <br>
          <center>
            <div class="equal-aspect-ratio" id="map-container1" hidden>
              <canvas class="map" id="map1"></canvas>
            </div>
          </center>
        </div>
        <!-- processing box -->
        <div class="row box relative">
          <div class="title-tab">
            <img src="static/img/processing_tab.png" alt="Brewery tab">
          </div>
          <div class="row">
            <div class="small-12 columns">
              <div id="ui-factory-bonus" class="row more-line-height flex-v-center">
                <div class="small-5 columns">
                  Cult Bonus
                </div>
                <div class="small-2 columns">
                  <span id="factory-bonus"></span>
                </div>
                <div class="small-5 columns">
                  <div id="progress-power" class="success progress">
                    <div id="meter-power" class="progress-meter"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="ui-factory-use" class="row more-line-height">
            <div class="small-4 columns">
              Bonus Decay
            </div>
            <div class="small-3 columns">
              <span id="factory-use"></span>
            </div>
            <div class="small-5 columns">
              <button id="buy-factory-use" class="btn-buy" onclick="action('buy_upgrade', 'factory_use')">+</button>
              <span id="price-factory-use"></span>
            </div>
          </div>
          <br>
          <div id="ui-factory-speed" class="row more-line-height">
            <div class="small-4 columns">
              Speed
            </div>
            <div class="small-3 columns">
              <span id="factory-speed"></span>
            </div>
            <div class="small-5 columns">
              <button id="buy-factory-speed" class="btn-buy" onclick="action('buy_upgrade', 'factory_speed')">+</button>
              <span id="price-factory-speed"></span>
            </div>
          </div>

          <div id="ui-factory-efficiency" class="row more-line-height">
            <div class="small-4 columns">
              Efficiency
            </div>
            <div class="small-3 columns">
              <span id="factory-efficiency"></span>
            </div>
            <div class="small-5 columns">
              <button id="buy-factory-efficiency" class="btn-buy" onclick="action('buy_upgrade', 'factory_efficiency')">+</button>
              <span id="price-factory-efficiency"></span>
            </div>
          </div>
        </div>
        <div class="row box menu-box">
          <button class="btn-cheat" onclick="reset_save()">Restart</button>
        </div>
        <!-- cheat box -->
        <div class="row box debug-box">
          <b>Debug</b><br><br>
          <button class="btn-cheat" onclick="cheat()">Cheat</button>
          &nbsp;
          <button class="btn-cheat" onclick="void_teabags()">Void</button>
          &nbsp;
          <button class="btn-cheat" onclick="give_worker()">+ Worker</button>
          &nbsp;
          <button class="btn-cheat" onclick="reset_save()">Restart</button>
        </div>
      </div>
      <!-- middle column starts here -->
      <div class="small-4 columns main-column">
        <!-- focus box -->
        <div id="ui-focus" class="row box">
          <div class="row center focus-header">
            <img src="static/img/focus_animated.gif" class="img-focus" alt="Focus points icon"> <span id="focus"></span>
          </div>
          <div class="row focus-projects">
            <div id="focus-project-slot0" class="fp-slot small-4 columns"></div>
            <div id="focus-project-slot1" class="fp-slot small-4 columns"></div>
            <div id="focus-project-slot2" class="fp-slot small-4 columns"></div>
          </div>
          <br><br>
          <div class="row">
            <div id="focus-project-slot3" class="fp-slot small-4 columns"></div>
            <div id="focus-project-slot4" class="fp-slot small-4 columns"></div>
            <div id="focus-project-slot5" class="fp-slot small-4 columns"></div>
          </div>
          <br><br>
          <div id="monks-focus-box" class="row">
            <div id="monk0" class="monk small-12 columns">
              <svg viewbox="0 0 101 123">
                <filter id="glow0">
                  <fedisplacementmap scale="-2" ychannelselector="G" result="result1" xchannelselector="R" in="SourceGraphic"></fedisplacementmap>
                  <fegaussianblur stddeviation="3" result="result2" in="result1"></fegaussianblur>
                  <fecolormatrix type="matrix" values="1 0 0 0 0.4 0.1 0.8 -0.6 0.5 0.4 0 0 1 0 -0.4 0 0 0 1 0"></fecolormatrix>
                </filter>
                <defs>
                  <mask id="mask0">
                    <rect class="fmonk-width" height="100%" fill="white" />
                    <rect class="fmonk-width" id="monkfg0" fill="#343434" />
                  </mask>
                </defs>
                <image id="full-charge0" class="fmonk-width" href="static/img/monk.png" filter="url(#glow0)"></image>
                <image href="static/img/monk.png" class="fmonk-width" mask="url(#mask0)"></image>
              </svg>
            </div>
            <div id="monk1" class="monk small-12 columns">
              <svg viewbox="0 0 101 123">
                <filter id="glow1">
                  <fedisplacementmap scale="-2" ychannelselector="G" result="result1" xchannelselector="R" in="SourceGraphic"></fedisplacementmap>
                  <fegaussianblur stddeviation="3" result="result2" in="result1"></fegaussianblur>
                  <fecolormatrix type="matrix" values="1 0 0 0 0.4 0.1 0.8 -0.6 0.5 0.4 0 0 1 0 -0.4 0 0 0 1 0"></fecolormatrix>
                </filter>
                <defs>
                  <mask id="mask1">
                    <rect class="fmonk-width" height="100%" fill="white" />
                    <rect class="fmonk-width" id="monkfg1" fill="#343434" />
                  </mask>
                </defs>
                <image id="full-charge1" class="fmonk-width" href="static/img/monk.png" filter="url(#glow1)"></image>
                <image href="static/img/monk.png" class="fmonk-width" mask="url(#mask1)"></image>
              </svg>
            </div>
            <div id="monk2" class="monk small-12 columns">
              <svg viewbox="0 0 101 123">
                <filter id="glow2">
                  <fedisplacementmap scale="-2" ychannelselector="G" result="result1" xchannelselector="R" in="SourceGraphic"></fedisplacementmap>
                  <fegaussianblur stddeviation="3" result="result2" in="result1"></fegaussianblur>
                  <fecolormatrix type="matrix" values="1 0 0 0 0.4 0.1 0.8 -0.6 0.5 0.4 0 0 1 0 -0.4 0 0 0 1 0"></fecolormatrix>
                </filter>
                <defs>
                  <mask id="mask2">
                    <rect class="fmonk-width" height="100%" fill="white" />
                    <rect class="fmonk-width" id="monkfg2" fill="#343434" />
                  </mask>
                </defs>
                <image id="full-charge2" class="fmonk-width" href="static/img/monk.png" filter="url(#glow2)"></image>
                <image href="static/img/monk.png" class="fmonk-width" mask="url(#mask2)"></image>
              </svg>
            </div>
            <div id="monk3" class="monk small-12 columns">
              <svg viewbox="0 0 101 123">
                <filter id="glow3">
                  <fedisplacementmap scale="-2" ychannelselector="G" result="result1" xchannelselector="R" in="SourceGraphic"></fedisplacementmap>
                  <fegaussianblur stddeviation="3" result="result2" in="result1"></fegaussianblur>
                  <fecolormatrix type="matrix" values="1 0 0 0 0.4 0.1 0.8 -0.6 0.5 0.4 0 0 1 0 -0.4 0 0 0 1 0"></fecolormatrix>
                </filter>
                <defs>
                  <mask id="mask3">
                    <rect class="fmonk-width" height="100%" fill="white" />
                    <rect class="fmonk-width" id="monkfg3" fill="#343434" />
                  </mask>
                </defs>
                <image id="full-charge3" class="fmonk-width" href="static/img/monk.png" filter="url(#glow3)"></image>
                <image href="static/img/monk.png" class="fmonk-width" mask="url(#mask3)"></image>
              </svg>
            </div>
            <div id="monk4" class="monk small-12 columns">
              <svg viewbox="0 0 101 123">
                <filter id="glow4">
                  <fedisplacementmap scale="-2" ychannelselector="G" result="result1" xchannelselector="R" in="SourceGraphic"></fedisplacementmap>
                  <fegaussianblur stddeviation="3" result="result2" in="result1"></fegaussianblur>
                  <fecolormatrix type="matrix" values="1 0 0 0 0.4 0.1 0.8 -0.6 0.5 0.4 0 0 1 0 -0.4 0 0 0 1 0"></fecolormatrix>
                </filter>
                <defs>
                  <mask id="mask4">
                    <rect class="fmonk-width" height="100%" fill="white" />
                    <rect class="fmonk-width" id="monkfg4" fill="#343434" />
                  </mask>
                </defs>
                <image id="full-charge4" class="fmonk-width" href="static/img/monk.png" filter="url(#glow4)"></image>
                <image href="static/img/monk.png" class="fmonk-width" mask="url(#mask4)"></image>
              </svg>
            </div>
          </div>
          <div class="leader-box">
            <div class="flex-column">
              <div class="small-price-tag pb-xsmall">-2<img src="static/img/focus_light.png" alt="Focus points icon"></div>
              <button onclick="action('refresh_focus_project')" class="btn-light btn-leader">
                <img src="static/img/reload.png" alt="Refresh icon">
              </button>
            </div>
            <div id="leader-strategies-box" class="flex-column">
              <span class="center pb-small">Focus:</span>
              <div id="leader-strategies">
                <input type="radio" id="strat-herbs" name="leader_strategy" value="fertilizer">
                <label for="strat-herbs" class="btn-light btn-leader"><img src="static/img/fertilizer_light.png" alt="Garden icon"></label>
                <input type="radio" id="strat-processing" name="leader_strategy" value="power">
                <label for="strat-processing" class="btn-light btn-leader"><img src="static/img/power_light.png" alt="Brewing icon"></label>
                <input type="radio" id="strat-focus" name="leader_strategy" value="focus">
                <label for="strat-focus" class="btn-light btn-leader"><img src="static/img/focus_light.png" alt="Focus points icon"></label>
                <input type="radio" id="strat-none" name="leader_strategy" value="none" checked>
                <label for="strat-none" class="btn-light btn-leader"><img src="static/img/x_icon.png" alt="No focus selected icon"></label>
              </div>
            </div>
          </div>
        </div>
        <!-- meditation box-->
        <div id="ui-meditation" class="row box">
          <b>Meditation<span id="meditation-inactive"> requires cultists</span></b><br><br>
          <div class="row" id="start-meditation">
            <div class="small-6 columns center">
              <button class="meditation-btn btn-light" onclick="action('start_meditation')">
                <!-- <img src="static/img/monk.png" width="24px"><br> -->
                <span id="meditation-price"></span>
                <img src="static/img/focus_light.png" class="focus-icon-meditation" alt="Focus points icon"></img>
              </button>
            </div>
            <div class="small-6 columns center">
              <button class="meditation-btn btn-light" onclick="action('start_practice')">
                <!-- <img src="static/img/monk.png" width="24px"><br> -->
                pratice
              </button>
            </div>
          </div>
          <!-- meditation bar -->
          <div id="meditation-target-container">
            <div class="stacked" id="meditation-target-bg"></div>
            <div class="stacked" id="meditation-target"></div>
            <div class="stacked" id="meditation-current"></div>
            <div class="stacked" id="meditation-line"></div>
            <div class="stacked meditation-try" id="meditation-try0"></div>
            <div class="stacked meditation-try" id="meditation-try1"></div>
            <div class="stacked meditation-try" id="meditation-try2"></div>
          </div>
          <!-- try boxes -->
          <div class="row" id="meditation-boxes">
            <div id="meditation-box-container0" class="small-4 columns meditation-box-container">
              <div onclick="action('try_meditation', 0)" class="meditation-box" id="meditation-box0">
                <img id="meditation-try-monk0" class="meditation-try-monk" src="static/img/monk.png" alt="Monk icon">
              </div>
            </div>
            <div id="meditation-box-container1" class="small-4 columns meditation-box-container">
              <div onclick="action('try_meditation', 1)" class="meditation-box" id="meditation-box1">
                <img id="meditation-try-monk1" class="meditation-try-monk" src="static/img/monk.png" alt="Monk icon">
              </div>
            </div>
            <div onclick="action('try_meditation', 2)" id="meditation-box-container2" class="small-4 columns meditation-box-container">
              <div class="meditation-box" id="meditation-box2">
                <img id="meditation-try-monk2" class="meditation-try-monk" src="static/img/monk.png" alt="Monk icon">
              </div>
            </div>
          </div>

          <!-- meditation result -->
          <div id="meditation-win">
            <img src="static/img/meditation_win.png" class="meditation-outcome-icon" alt="Meditation win!">  + <span id="meditation-amount"></span> <img src="static/img/focus_dark.png" alt="Focus points icon">
          </div>
          <div id="meditation-lose">
            <img src="static/img/meditation_lose.png" class="meditation-outcome-icon" alt="Meditation lose!">
          </div>

        </div>
      </div>
      <!-- right column -->
      <div class="small-4 columns main-column">
        <!-- projects box -->
        <div id="ui-projects1" class="row box"></div>
      </div>
      <!-- END OF GAME POPUP -->
      <div class="reveal popup" id="end-popup-phase1" data-reveal>
        <h2>Congrats! You've made it!</h2>
        <br>
        <p>You showed devotion, strength and exellent skill of exploiting workers. You were of great use for our teacult.
          <br><br>
          You earned a special trohpy!
        </p>
        <a href="end.html">
          <img id="popup-end_img" src="/static/img/teapets/UT_pot.png" alt="box of pandora" />
        </a>
        <p>An acient artifact protected by generations of teacultists.<br>
        Keep it save and make shure <br>
        <b>never ever to open it.</b></p>
      </div>
    </div>
    <footer class="footer">
    </footer>
    <audio loop id="audio">
      <source src="static/bg.mp3" type="audio/mpeg">
    </audio>
    <script>
      $(document).foundation();
    </script>
    <script type="text/javascript" src="js/config.js"></script>
    <script type="text/javascript" src="js/utils.js"></script>
    <script type="text/javascript" src="js/projects.js"></script>
    <script type="text/javascript" src="js/game.js"></script>
    <script type="text/javascript" src="js/engine/base.js"></script>
    <script type="text/javascript" src="js/engine/engine0.js"></script>
    <script type="text/javascript" src="js/engine/engine1.js"></script>
  </body>

  <script id="project-template" type="text/x-handlebars-template">
    {{#each projects}}
    <div class="project clickable" id="project-{{id}}" onclick="action('buy_project', '{{id}}')">
      <div class="project-title">
        {{title}}
      </div>
      <div class="project-description">
        {{description}}
      </div>
      <div class="project-price">
        {{{cost_str}}}
      </div>
    </div>
    {{/each}}
  </script>

  <script id="focus-project-template" type="text/x-handlebars-template">
  <div class='focus-project relative' onclick="action('activate_focus_project', '{{id}}')" id='focus-project{{id}}'>
    <div id="focus-monks{{id}}" class="focus-actions-container">
      {{#if_eq focus_action 1}}
      <img src="static/img/monk.png" class="icon-focus-actions">
      {{/if_eq}}
      {{#if_eq focus_action 2}}
      <img src="static/img/monk.png" class="icon-focus-actions">
      <img src="static/img/monk.png" class="icon-focus-actions">
      {{/if_eq}}
      {{#if_eq focus_action 3}}
      <img src="static/img/monk.png" class="icon-focus-actions">
      <img src="static/img/monk.png" class="icon-focus-actions">
      <img src="static/img/monk.png" class="icon-focus-actions">
      {{/if_eq}}
      {{#if_eq focus_action 4}}
      <img src="static/img/monk.png" class="icon-focus-actions">
      <img src="static/img/monk.png" class="icon-focus-actions">
      <img src="static/img/monk.png" class="icon-focus-actions">
      <img src="static/img/monk.png" class="icon-focus-actions">
      {{/if_eq}}
    </div>
    <div class="row">
      <div class="small-10 columns no-padding">
        {{#if_eq ftype 'converter'}}
        <img id="focus-swirl{{id}}" class="focus-swirl converter" src="static/img/mandala_converter.gif">
        {{/if_eq}}
        {{#if_eq ftype 'generator'}}
        <img id="focus-swirl{{id}}" class="focus-swirl generator" src="static/img/mandala.gif">
        {{/if_eq}}
        <div id="focus-btn{{id}}" class="btn-light focus-icons-btn inactive">
          <div class="focus-icons">
            {{#each effect}}
            <img src="static/img/{{@key}}_light.png" class="img-focus-project level{{../focus-action}} resources{{../id}}">
            {{#if @first}}
            {{#if_eq ../ftype 'converter'}}
            <img src="static/img/arrow_white.png" class="arrow-focus-project">
            {{/if_eq}}
            {{/if}}
            {{/each}}
          </div>
        </div>
      </div>
    </div>
  </div>
  </script>
</html>